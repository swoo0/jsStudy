<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>Document</title>

    <script>
        /*
            딱보니 반복되는 부분이 많고, 실제 값이 필요한 부분은 몇개 안됨
            일반화 하고 픔 (DRY)
        */    
        // 자바스크립트에선 namespace(자바의 package) 개념이 없음
        // module개념은 있음(이건 나중에)
            var System = {};
            System.out = {};
            System.out.println = function(p_msg) {
                document.write(p_mag);
            }
            
            System.out.println("<h1>흥칫뿡</h>")
    
    
    
            // 1. 함수 정의
            var $ = {};  // 빈 객체를 많이 이용
            $.ajax = function(p_set) {
                v_ajax = new XMLHttpRequest();
                v_ajax.open(p_set.method, p_set.url, true);
                v_ajax.onreadystatechange = function() {
                    if (v_ajax.readyState == 4 && v_ajax.state == 200) {
                        if (p_set.dataType == "json") {
                            p_set.success(JSON.parse(v_ajax.responseTest));
                        } else if (p_set.dataType == "xml") {
                            p_set.success(v_ajax.responseXML);
                        } else {
                            p_set.success(v_ajax.responseText);
                        }
                    } 
                }
                v_ajax.send();
            }
    
    
            // 2. 함수 실행문
            https://www.flickr.com/services/feeds/photos_public.gne?tags=cat
            https://www.flickr.com/services/feeds/photos_public.gne?tags=cat&format=json
            $.ajax({
                method:"get",
                url:"jansori.txt",
                dataType:"json",
                success:function(p_rslt) {
                    console.log(p_rslt[0].name);
                }
            })
    
    
    
    
            var v_btnAjax = document.querySelector("#id_ajax");
            var v_display = document.querySelector("#display");
            var f_ajax = function(){
                //좀 전에 한 거 외워서 써보세용, 다 못써도 되용 일단 시도
                var v_ajax = new XMLHttpRequest();
                v_ajax.open("get","jansori.txt",true);
                v_ajax.onreadystatechange = function(){
                    if(v_ajax.readyState == 4 && v_ajax.status == 200){
                        v_display.innerHTML ="<h1>" +v_ajax.responseText + "</h1>";
                    }
                }
                v_ajax.send();
            }
            v_btnAjax.addEventListener("click",f_ajax);
    
    
            // // 통신 대신 해줄 아자씨 맹글기
            // var v_ajax = new XMLHttpRequest(); 
            
            // // 시킬 일 지정
            // v_ajax.open("get", "jansori.txt", true);  // true:비동기 false:동기
            // v_ajax.onreadystatechange = function() {    // 연락 모니터링
            //     // 우린 중간과정은 관심없고, 통신이 잘 끝난것만 관심 있음
            //     if (v_ajax.readyState == 4 && v_ajax.status == 200) { 
        /*  */    //         // responseText속성에 서버가 돌려준 값이 담겨져서 옴
            //         console.log(v_ajax.responseText.substring(0,12));
            //         // AJAX를 이용하면 받아온 결과 값을 마음대로 가공 할 수 있음.
            //     }
            // } 
            // v_ajax.send();  // 실행
            // console.log("이한범 바쳐서 허정은 공경하기");
    </script>

</head>
<body>
    <!-- <form action="">  // form에선 get/post만 쓸 수 있음 
        <input type="hidden" name="_method" value="put"></input>
    </form> -->
    <!-- get post put delete patch option -->
    이미지 검색 <input type="text" id="id_sch">
    <input type="button" value="누르셩" id="id_ajax">
    <div id="display"></div>
    
    <script>

        var v_preURL= ""
        var v_p

    </script>

</body>
</html>